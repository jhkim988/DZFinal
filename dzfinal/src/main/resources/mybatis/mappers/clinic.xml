<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.douzone.dzfinal.repository.ClinicRepository">
	<select id="getPatient" resultType="Patient">
		SELECT p.patient_id, p.patient_name, p.front_registration_number, p.back_registration_number
		FROM Patient p INNER JOIN Reception r ON r.patient_id = p.patient_id
		WHERE p.patient_id = #{reception_id}
	</select>
	
	<select id="getUnderlyingList" resultType="java.util.HashMap">
		SELECT d.disease_code, d.disease_name
		FROM Patient p INNER JOIN Underlying u ON p.patient_id = u.patient_id
			INNER JOIN Disease d ON d.disease_code = u.disease_code
		WHERE p.patient_id = #{reception_id}
	</select>
	
	<select id="getDrug_TakingList" resultType="java.util.HashMap">
		SELECT d.drug_code, d.drug_name
		FROM Patient p INNER JOIN Drug_Taking dt ON p.patient_id = dt.patient_id
			INNER JOIN Drug d ON dt.drug_id = d.drug_id
		WHERE dt.patient_id = #{reception_id}
	</select>
</mapper>