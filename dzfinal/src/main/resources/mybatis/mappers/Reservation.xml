<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.douzone.dzfinal.repository.ReservationRepository">

	<select id="todayReservationList" resultType="com.douzone.dzfinal.entity.Reservation">
		SELECT R.reservation_id,
			R.patient_name,
			R.phone_number1,
			R.phone_number2,
			R.phone_number3,
			E.employee_name,
			P.front_registration_number,
			P.back_registration_number,
			P.zip_code,
			P.address,
			P.detail_address,
			R.treatment_reason,
			R.wish_time,
			R.state
		FROM Reservation R 
		LEFT OUTER JOIN  Patient P ON R.patient_id = P.patient_id
		INNER JOIN Employee E ON R.doctor = E.employ_id
		WHERE DATE_FORMAT(R.wish_date,"%Y-%m-%d") = CURDATE()
		AND R.state="예약중"
	</select>
	
	<select id="selectedReservationDetails" resultType="com.douzone.dzfinal.entity.Reservation">
		SELECT R.reservation_id,
			R.patient_id,
			R.patient_name,
			R.phone_number1,
			R.phone_number2,
			R.phone_number3,
			R.doctor,
			E.employee_name,
			P.front_registration_number,
			P.back_registration_number,
			P.zip_code,
			P.address,
			P.detail_address,
			P.gender,
			R.treatment_reason
		FROM Reservation R 
		LEFT OUTER JOIN  Patient P ON R.patient_id = P.patient_id
		INNER JOIN Employee E ON R.doctor = E.employ_id
		WHERE R.reservation_id=#{reservation_id}
	</select>
	
	
</mapper>